<!DOCTYPE html><html><head><meta charset="utf-8"><title>Creating widgets | Dojo</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="Creating widgetsOverviewIn this tutorial, you will learn how to create and style custom widgets in Dojo 2.
PrerequisitesWith the Dojo 2 tutorial series, you may work with the examples following two di"><meta property="og:type" content="website"><meta property="og:title" content="Creating widgets"><meta property="og:url" content="https://dojo.github.io/tutorials/003_creating_widgets/index.html"><meta property="og:site_name" content="Dojo"><meta property="og:description" content="Creating widgetsOverviewIn this tutorial, you will learn how to create and style custom widgets in Dojo 2.
PrerequisitesWith the Dojo 2 tutorial series, you may work with the examples following two di"><meta property="og:image" content="https://dojo.github.io/resources/worker.png"><meta property="og:updated_time" content="2017-03-28T16:47:18.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Creating widgets"><meta name="twitter:description" content="Creating widgetsOverviewIn this tutorial, you will learn how to create and style custom widgets in Dojo 2.
PrerequisitesWith the Dojo 2 tutorial series, you may work with the examples following two di"><meta name="twitter:image" content="https://dojo.github.io/resources/worker.png"><meta name="twitter:creator" content="@https://twitter.com/dojo"><link rel="alternate" href="/atom.xml" title="Dojo" type="application/atom+xml"><link rel="icon" href="/images/favicons/favicon.ico"><link rel="stylesheet" href="/css/main.css"><script type="text/javascript">!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src="//www.google-analytics.com/analytics.js",s.parentNode.insertBefore(o,s)}(window,document,"script",0,"ga"),ga("create","UA-3242977-15","auto"),ga("send","pageview")</script><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body class="body-tutorial"><header class="container site-header"><div class="content-container"><div class="row"><nav class="site-nav"><a href="/" class="header-logo"><img src="/images/dojo2-logo-white.svg" alt="Dojo"></a><a class="main-nav-link" href="/tutorials">Tutorials</a> <a class="main-nav-link" href="/api">API</a> <a class="main-nav-link" href="/blog/2017/03/27/Dojo-2-is-coming">Blog</a> <a class="main-nav-link main-nav-icon-link" href="https://github.com/dojo/meta"><img src="/images/logos/github-white.svg" alt="Dojo on Github" class="nav-icon github"></a></nav></div></div></header><div class="page-content"><section class="content-container" id="main"><div class="split-content"><div class="tutorial-content"><h1 id="Creating-widgets"><a href="#Creating-widgets" class="headerlink" title="Creating widgets"></a>Creating widgets</h1><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>In this tutorial, you will learn how to create and style custom widgets in Dojo 2.</p><h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><p>With the Dojo 2 tutorial series, you may work with the examples following two different paths:</p><ul><li>A browser embedded editor</li><li>A local installation</li></ul><p>The browser embedded editor is intended to make it easy to quickly see the examples in action, but does not match a normal development environment, and does not provide all of the benefits of TypeScript.</p><p>If you prefer a local installation, please visit the <a href="../000_local_installation/">Dojo 2 Installation Guide</a> before proceeding further with this tutorial.</p><p>Whether you are working locally or using the embedded editor, you need to be familiar with TypeScript as Dojo 2 uses it extensively. For more information, refer to the <a href="../comingsoon.html">TypeScript and Dojo 2</a> article.</p><h2 id="Demo-files"><a href="#Demo-files" class="headerlink" title="Demo files"></a>Demo files</h2><p>If you are following along locally, you can <a href="../assets/003_creating_widgets-initial.zip">download</a> the demo project to get started.</p><h2 id="Creating-the-application-widget"><a href="#Creating-the-application-widget" class="headerlink" title="Creating the application widget"></a>Creating the application widget</h2><p>In the <a href="../001_static_content">first tutorial</a> in this series, we created an application with a single widget, which we modified to show the title of our Biz-E Bodies view. In this tutorial, we’re going to expand our application to show each worker’s portrait as well as their name. Before we get to that we have some refactoring to do. Our demo application is currently hard-wired to render our single widget, which has been renamed to the more appropriate <code>Banner</code> in this tutorial. This can be found in the <code>main.ts</code> file here:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> ProjectorMixin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/mixins/Projector'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Banner <span class="token keyword">from</span> <span class="token string">'./widgets/Banner'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'my-app'</span><span class="token punctuation">)</span> <span class="token operator">||</span> undefined<span class="token punctuation">;</span>

<span class="token keyword">const</span> Projector <span class="token operator">=</span> <span class="token function">ProjectorMixin</span><span class="token punctuation">(</span>Banner<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> projector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Projector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

projector<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Attached!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>This line: <code>const Projector = ProjectorMixin(Banner);</code> tells the application to use the <code>Banner</code> widget as the source of the virtual DOM elements for rendering the application. To add a second widget, we are going to create a new widget called <code>App</code> that represents the entire application that we are building. To start that process, go into the empty <code>App.ts</code> file located in the <code>src/widgets</code> directory. First, we need to add the required dependencies to create the <code>App</code> widget.. Add these lines at the top of the file.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> WidgetBase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/WidgetBase'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DNode<span class="token punctuation">,</span> WidgetProperties <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/interfaces'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> v<span class="token punctuation">,</span> w <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/d'</span><span class="token punctuation">;</span>
</code></pre><p>The <code>WidgetBase</code> class will be used as the base class for our <code>App</code> widget. <code>WidgetBase</code> (and its descendants) work with the <code>WidgetProperties</code> interface to define the publicly accessible properties of the widget. Finally, the <code>v</code> and <code>w</code> functions are used to render virtual DOM nodes (with the <code>v</code> function) or widgets (via <code>w</code>). Both virtual DOM nodes and widgets are rendered generate <code>DNode</code>s, the base type of all virtual DOM nodes in Dojo 2.</p><p>Our next dependency to load is the Banner widget that we created in the first tutorial. To import it, add the following statement to <code>App.ts</code>:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> Banner <span class="token keyword">from</span> <span class="token string">'./Banner'</span><span class="token punctuation">;</span>
</code></pre><p>With all of the dependencies in place, let’s create the <code>App</code> widget itself:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">WidgetBase</span><span class="token operator">&lt;</span>WidgetProperties<span class="token operator">></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><p>Notice that the <code>App</code> class is extending <code>WidgetBase</code>, a <a href="https://www.typescriptlang.org/docs/handbook/generics.html#generic-classes" target="_blank" rel="external">generic class</a> that accepts the <code>WidgetProperties</code> interface. This will give our class several default properties and behaviors that are expected to be present in a Dojo 2 widget. Also, notice that we are have added the <code>export</code> and <code>default</code> keywords before the <code>class</code> keyword. This is the ES6 standard approach for creating modules, which Dojo 2 leverages when creating a widget - the widget should be the default export in order to make it as convenient as possible to use.</p><p>Our next step is to override <code>WidgetBase</code>‘s <code>render</code> method to generate the application’s view. The <code>render</code> method has the following signature <code>render() : DNode</code>, which means that our render method has to return a <code>DNode</code> (an abstraction for an <a href="https://github.com/hyperhype/hyperscript" target="_blank" rel="external">HyperScript</a> node) so that the application’s projector knows what to render. The normal way to generate this <code>DNode</code> is by calling either the <code>v</code> or <code>w</code> functions. To start, let’s use the simplest <code>render</code> method by adding this to the <code>App</code> class:</p><pre class="language-ts"><code class="language-ts"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> DNode <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>This method will generate a <code>div</code> virtual node with no children. To render the <code>Banner</code> as a child of the div, we’ll use the <code>w</code> function that is designed to render widgets. Update the <code>render</code> method to the following:</p><pre class="language-ts"><code class="language-ts"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> DNode <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token function">w</span><span class="token punctuation">(</span>Banner<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>Notice that the <code>w</code> function takes two parameters - a widget class and an object literal. That literal must implement the interface that was passed to <code>WidgetBase</code> via TypeScript generics. In this case, the <code>Banner</code> class uses <code>WidgetProperties</code> which has the following definition:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">WidgetProperties</span> <span class="token punctuation">{</span>
    key<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>
    bind<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>Both of these properties are optional, so we can pass an empty object for now.</p><p>Our <code>App</code> class is now complete and ready to replace the <code>Banner</code> class as the root of the application. To do that, we will edit <code>main.ts</code>. The first update will replace the <code>import</code> statement from the <code>Banner</code> class to the new <code>App</code> class:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./widgets/App'</span><span class="token punctuation">;</span>
</code></pre><p>The only other change we need to make is to pass the <code>App</code> class into the <code>ProjectorMixin</code> function call on line 6:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> Projector <span class="token operator">=</span> <span class="token function">ProjectorMixin</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>With that change, the <code>App</code> widget is ready to serve as the root of our application. Let’s test everything by building and running the project. If you are working locally, run the following command:</p><pre class="language-bash"><code class="language-bash">dojo build --watch
</code></pre><p>then open up a web browser and navigate to <a href="http://localhost:9999" target="_blank" rel="external"><code>http://localhost:9999</code></a>. You should see the Biz-E Bodies title that we started with, but if you examine the actual DOM, you will see that the Banner’s <code>&lt;h1&gt;</code> tag has been wrapped by the App’s <code>&lt;div&gt;</code>, so everything appears to be working.</p><p>In the next section, we’ll create the <code>Worker</code> widget that will show the portrait and name of our Biz-E bodies.</p><h2 id="Creating-the-Worker-widget"><a href="#Creating-the-Worker-widget" class="headerlink" title="Creating the Worker widget"></a>Creating the Worker widget</h2><p>Now it is time to create our Worker widget. This widget will only render static content. We will use its properties to allow the application to customize what is rendered. Our goal is to end up with something that looks like this:</p><p><img src="resources/worker.png" alt="worker_widget"></p><p>The first step is to create the worker widget. We will put the implementation in <code>widgets/Worker.ts</code>. As with the <code>App</code> widget that we created earlier, we need to add some initial dependencies and the class declaration to <code>widget/Worker.ts</code>:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> WidgetBase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/WidgetBase'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DNode<span class="token punctuation">,</span> WidgetProperties <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/interfaces'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> v <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/d'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Worker</span> <span class="token keyword">extends</span> <span class="token class-name">WidgetBase</span><span class="token operator">&lt;</span>WidgetProperties<span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> DNode <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>This is nearly identical to the <code>App</code> widget with one exception: we are not importing the <code>w</code> function as the <code>Worker</code> widget will not contain any child widgets.</p><p>Our next step is to extend the <code>render()</code> method to customize the widget’s appearance. To accomplish this, we are going to need two children. One <code>&lt;img&gt;</code> tag to show the portrait and a <code>&lt;strong&gt;</code> tag to display the worker’s name. Try and implement that using the URL <code>images/worker.jpg</code> (for the embedded editor, use: <code>https://dojo.io/tutorials/003_creating_widgets/demo/finished/biz-e-corp/src/images/worker.jpg</code>) for the image’s source and print the first and last names. If you need help, or want to check your solution, click the button below to see our solution.</p><div class="solution-container"><button class="toggle-solution" data-target="showSolution1">Toggle Solution</button><section id="showSolution1" class="hidden"><pre class="language-javascript"><code>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> DNode <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
			<span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> src<span class="token punctuation">:</span> <span class="token string">'images/worker.jpg'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
				<span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'strong'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token string">'lastName, firstName'</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
			<span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></section></div><p>Before we continue to refine this widget, let’s review our progress by adding the <code>Worker</code> widget to the app. Within <code>App.ts</code>, import the <code>Worker</code> widget and then update the <code>App</code>‘s render method to render it. The <code>Worker</code> will be another child of the <code>App</code>, so we just need to add another entry to the children array. Try that now and, when done, check your answer by clicking on the “Show solution” button.</p><div class="solution-container"><button class="toggle-solution" data-target="showSolution2">Toggle Solution</button><section id="showSolution2" class="hidden"><pre class="language-javascript"><code>
<span class="token keyword">import</span> <span class="token punctuation">{</span> WidgetBase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/WidgetBase'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DNode<span class="token punctuation">,</span> WidgetProperties <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/interfaces'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> v<span class="token punctuation">,</span> w <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/d'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Banner <span class="token keyword">from</span> <span class="token string">'./Banner'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Worker <span class="token keyword">from</span> <span class="token string">'./Worker'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">WidgetBase</span><span class="token operator">&lt;</span>WidgetProperties<span class="token operator">></span> <span class="token punctuation">{</span>
	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> DNode <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
			<span class="token function">w</span><span class="token punctuation">(</span>Banner<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token function">w</span><span class="token punctuation">(</span>Worker<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></section></div><p>Now run the application with <code>dojo build --watch</code> and navigate to <a href="http://localhost:9999" target="_blank" rel="external"><code>http://localhost:9999</code></a>. We have succeeded in rendering the widget, but there seems to be some styling issues. We’ll come back to that in a bit. For now, let’s continue refining the <code>Worker</code> widget to allow the application to configure it before it is rendered. In Dojo 2, this is done by creating an interface that extends <code>WidgetProperties</code> and using that to pass configuration information into the widget.</p><p>Return to <code>widgets/Worker.ts</code> and add an interface with the custom properties that we need:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">WorkerProperties</span> <span class="token keyword">extends</span> <span class="token class-name">WidgetProperties</span> <span class="token punctuation">{</span>
    firstName<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">string</span>
    lastName<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">string</span>
<span class="token punctuation">}</span>
</code></pre><p>Then change the generic parameter passed into <code>WidgetBase</code> with the new interface:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Worker</span> <span class="token keyword">extends</span> <span class="token class-name">WidgetBase</span><span class="token operator">&lt;</span>WorkerProperties<span class="token operator">></span>
</code></pre><p>The <code>WorkerProperties</code> interface adds two new optional properties that we’ll be able to use. Now that these are available, let’s use them to make the name of the worker dynamic. Inside of the render method, add the following code to create some local constants for the first and last names:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token punctuation">{</span>
    firstName <span class="token operator">=</span> <span class="token string">'firstName'</span><span class="token punctuation">,</span>
    lastName <span class="token operator">=</span> <span class="token string">'lastName'</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">;</span>
</code></pre><p>This code retrieves the appropriate property and provides a reasonable default, in case the widget doesn’t receive a value. We can now update the generated virtual DOM with those values by updating the returned value from the render method with those property values.</p><p>The new <code>render</code> method should look like this:</p><pre class="language-ts"><code class="language-ts"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> DNode <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
        firstName <span class="token operator">=</span> <span class="token string">'firstName'</span><span class="token punctuation">,</span>
        lastName <span class="token operator">=</span> <span class="token string">'lastName'</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> src<span class="token punctuation">:</span> <span class="token string">'images/worker.jpg'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
                <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'strong'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>The final step in creating this widget is to update the <code>render</code> method in the <code>App</code> class to pass in some properties. In a full Dojo 2 application, these values would normally be retrieved from a store, but for now, we’ll just use static properties. To learn more about working stores in Dojo 2, take a look at the <a href="../comingsoon.html">dojo/stores</a> tutorial in the advanced section.</p><p>In <code>App.ts</code>, update the line that is rendering the <code>Worker</code> to contain values for the <code>firstName</code> and <code>lastName</code> properties:</p><pre class="language-ts"><code class="language-ts"><span class="token function">w</span><span class="token punctuation">(</span>Worker<span class="token punctuation">,</span> <span class="token punctuation">{</span> firstName<span class="token punctuation">:</span> <span class="token string">'Tim'</span><span class="token punctuation">,</span> lastName<span class="token punctuation">:</span> <span class="token string">'Jones'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>If you are following along locally, you should already see the new values. However, if you shut down the build watcher, you can start it up again by running <code>dojo build --watch</code> and navigating to <code>http://localhost:9999</code>.</p><p>At this point, we have a good start to our widget, but it still doesn’t look very good. In the next section we’ll address that by learning how to use CSS to style our widgets.</p><h2 id="Styling-widgets-with-CSS-modules"><a href="#Styling-widgets-with-CSS-modules" class="headerlink" title="Styling widgets with CSS modules"></a>Styling widgets with CSS modules</h2><p>In the first tutorial, we were able to adjust the look of the <code>Banner</code> widget by directly manipulating the <code>styles</code> property of the generated virtual DOM. While this was effective, it is generally considered better to use external CSS files to establish the look and feel of an application. Dojo leverages <a href="https://github.com/css-modules/css-modules" target="_blank" rel="external">CSS Modules</a> to provide all of the flexibility of CSS, plus two additional benefits: type support in TypeScript and localized styling rules to help prevent inadvertent rule collisions.</p><p>To allow our Worker widget to be styled, we need to modify the Widget class. First, apply a <a href="https://www.typescriptlang.org/docs/handbook/decorators.html" target="_blank" rel="external">decorator</a> to the class to modify the widget’s constructor and prepare its instances to work with CSS modules. Also, apply a “mixin” to the Worker widget. A mixin is not intended to be used on its own, but instead works with a base class to add useful functionality. Add the following import to the top of <code>widgets/Worker.ts</code>:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> theme<span class="token punctuation">,</span> ThemeableMixin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/mixins/Themeable'</span><span class="token punctuation">;</span>
</code></pre><p>We also need to <code>import</code> our CSS:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token operator">*</span> as styles <span class="token keyword">from</span> <span class="token string">'../styles/worker.css'</span><span class="token punctuation">;</span>
</code></pre><p><code>worker.css</code> contains CSS selectors and rules to be consumed by the widget and its components.</p><p>With the imports in place, we can add the <strong>@theme</strong> decorator and apply the mixin to the <code>Worker</code> class in <code>widgets/Worker.ts</code>:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> WorkerBase <span class="token operator">=</span> <span class="token function">ThemeableMixin</span><span class="token punctuation">(</span>WidgetBase<span class="token punctuation">)</span><span class="token punctuation">;</span>

@<span class="token function">theme</span><span class="token punctuation">(</span>styles<span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Worker</span> <span class="token keyword">extends</span> <span class="token class-name">WorkerBase</span><span class="token operator">&lt;</span>WorkerProperties<span class="token operator">></span>
</code></pre><p>Next, let’s add our CSS rules in <code>src/styles/</code> which will allow us to style the <code>Worker</code> widget:</p><pre class="language-css"><code class="language-css"><span class="token selector"><span class="token class">.worker</span> </span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">27%</span><span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">3%</span><span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.image</span> </span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p><code>dojo build --watch</code> will detect these new rules and generate the type declaration files automatically, allowing us to apply them to the <code>Worker</code> widget. Return to <code>widgets/Worker.ts</code> and update the render method:</p><pre class="language-ts"><code class="language-ts"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> DNode <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
        firstName <span class="token operator">=</span> <span class="token string">'firstName'</span><span class="token punctuation">,</span>
        lastName <span class="token operator">=</span> <span class="token string">'lastName'</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        classes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>worker<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                classes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>image<span class="token punctuation">)</span><span class="token punctuation">,</span>
                src<span class="token punctuation">:</span> <span class="token string">'images/worker.jpg'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
                <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'strong'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>If you return to the browser, you’ll see that the widget now has the styles applied and looks a little better. While you are there, open up the developer tools and look at the CSS classes that have been applied to the widget’s components. Notice that we don’t have class names such as <code>.worker</code> or <code>.image</code> like we used in the CSS file, rather we have something like <code>.worker__image__3aIJl</code>. This obfuscation is done by the <code>dojo build</code> command when it compiles the project to ensure that CSS selectors are localized to a given widget. There are also ways to provide global styling rules (called “themes”). To learn more about those, take a look at the <a href="../comingsoon.html">Theming an Application</a> tutorial in the Cookbook section.</p><p>We’ve almost achieved our goal of displaying a collection of Biz-E Bodies, but we have one thing remaining. We could certainly add additional <code>Worker</code> widgets to our application, but they would all be siblings of the <code>Banner</code> widget and could be difficult to style properly. In the next section, we’ll create a simple container widget that will handle the layout of the <code>Worker</code> widgets.</p><h2 id="Moving-the-Worker-into-a-container"><a href="#Moving-the-Worker-into-a-container" class="headerlink" title="Moving the Worker into a container"></a>Moving the Worker into a container</h2><p>The <code>WorkerContainer</code> has many of the same responsibilities of the <code>App</code> widget. It will be responsible for generating both virtual DOM nodes directly as well as rendering widgets. Similar to the <code>Worker</code> widget, we will apply some styling to it. Putting this all together, add the following to <code>widgets/WorkerContainer.ts</code>:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> WidgetBase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/WidgetBase'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DNode<span class="token punctuation">,</span> WidgetProperties <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/interfaces'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> w<span class="token punctuation">,</span> v <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/d'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Worker <span class="token keyword">from</span> <span class="token string">'./Worker'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> theme<span class="token punctuation">,</span> ThemeableMixin<span class="token punctuation">,</span> ThemeableProperties <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/mixins/Themeable'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> as styles <span class="token keyword">from</span> <span class="token string">'../styles/workerContainer.css'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> WorkerContainerBase <span class="token operator">=</span> <span class="token function">ThemeableMixin</span><span class="token punctuation">(</span>WidgetBase<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> WorkerContainerBase <span class="token operator">=</span> <span class="token function">ThemeableMixin</span><span class="token punctuation">(</span>WidgetBase<span class="token punctuation">)</span><span class="token punctuation">;</span>

@<span class="token function">theme</span><span class="token punctuation">(</span>styles<span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">WorkerContainer</span> <span class="token keyword">extends</span> <span class="token class-name">WorkerContainerBase</span><span class="token operator">&lt;</span>ThemeableProperties<span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> DNode <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            classes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>Now we can update the <code>render</code> method to include some workers. Add the following to the top of the <code>render</code> method:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> workers<span class="token punctuation">:</span> DNode<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token function">w</span><span class="token punctuation">(</span>Worker<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        firstName<span class="token punctuation">:</span> <span class="token string">'Tim'</span><span class="token punctuation">,</span>
        lastName<span class="token punctuation">:</span> <span class="token string">'Jones'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">w</span><span class="token punctuation">(</span>Worker<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        firstName<span class="token punctuation">:</span> <span class="token string">'Alicia'</span><span class="token punctuation">,</span>
        lastName<span class="token punctuation">:</span> <span class="token string">'Fitzgerald'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">w</span><span class="token punctuation">(</span>Worker<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        firstName<span class="token punctuation">:</span> <span class="token string">'Hans'</span><span class="token punctuation">,</span>
        lastName<span class="token punctuation">:</span> <span class="token string">'Mueller'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><p>Replace the empty array in the <code>v</code> function’s third argument with this array:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    classes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> workers<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Now it is time to add the <code>container</code> CSS rule inside <code>styles/workerContainer.css</code>:</p><pre class="language-css"><code class="language-css"><span class="token selector"><span class="token class">.container</span> </span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">80%</span><span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> auto<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>Finally, let’s update the <code>App</code> class to replace the <code>Worker</code> widget with the new <code>WorkerContainer</code>.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> WidgetBase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/WidgetBase'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DNode<span class="token punctuation">,</span> WidgetProperties <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/interfaces'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> v<span class="token punctuation">,</span> w <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/d'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Banner <span class="token keyword">from</span> <span class="token string">'./Banner'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> WorkerContainer <span class="token keyword">from</span> <span class="token string">'./WorkerContainer'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">WidgetBase</span><span class="token operator">&lt;</span>WidgetProperties<span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> DNode <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token function">w</span><span class="token punctuation">(</span>Banner<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">w</span><span class="token punctuation">(</span>WorkerContainer<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>The application now renders three workers in the <code>WorkerContainer</code> widget, allowing us to control how they are laid out without impacting the overall application.</p><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>In this tutorial, we have created and styled widgets within Dojo 2. Widgets are classes that derive from <code>WidgetBase&lt;WidgetProperties&gt;</code>. This base class provides the basic functionality for generating visual components in a Dojo 2 application. By overriding the <code>render</code> method, a widget can generate the virtual DOM nodes that control how it is rendered.</p><p>Additionally, we learned how to style widgets by using CSS modules. These modules provide all of the flexibility of CSS with the additional advantages of providing strongly typed and localized class names that allow a widget to be styled without the risk of affecting other aspects of the application.</p><p>If you would like, you can download the <a href="../assets/003_creating_widgets-finished.zip">demo application</a>.</p><p>In the <a href="../004_user_interactions">next tutorial</a>, we’ll explore the rich set of widgets included with Dojo 2 to create applications quickly and efficiently.</p></div><div class="editor"><iframe src="https://embed.plnkr.co/9dfUeb/?show=src/widgets/Worker.ts,preview&preview=index.html" class="editor-frame"></iframe></div></div></section></div><div><footer class="page-footer"><div class="content-container"><div class="footer-logo"><img src="/images/logos/dojo-logo-black.svg"></div><div class="info">&copy; JS Foundation, All Rights Reserved.</div></div></footer><script src="/js/combined.js"></script></div></body></html>