<!DOCTYPE html><html><head><meta charset="utf-8"><title>Responding to events | Dojo</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="Responding to eventsOverviewIn this tutorial, you will learn how to update an application in response to user-generated events, such as clicking a button.
We will start with an application that render"><meta property="og:type" content="website"><meta property="og:title" content="Responding to events"><meta property="og:url" content="https://dojo.github.io/tutorials/004_user_interactions/index.html"><meta property="og:site_name" content="Dojo"><meta property="og:description" content="Responding to eventsOverviewIn this tutorial, you will learn how to update an application in response to user-generated events, such as clicking a button.
We will start with an application that render"><meta property="og:updated_time" content="2017-03-28T16:48:27.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Responding to events"><meta name="twitter:description" content="Responding to eventsOverviewIn this tutorial, you will learn how to update an application in response to user-generated events, such as clicking a button.
We will start with an application that render"><meta name="twitter:creator" content="@https://twitter.com/dojo"><link rel="alternate" href="/atom.xml" title="Dojo" type="application/atom+xml"><link rel="icon" href="/images/favicons/favicon.ico"><link rel="stylesheet" href="/css/main.css"><script type="text/javascript">!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src="//www.google-analytics.com/analytics.js",s.parentNode.insertBefore(o,s)}(window,document,"script",0,"ga"),ga("create","UA-3242977-15","auto"),ga("send","pageview")</script><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body class="body-tutorial"><header class="container site-header"><div class="content-container"><div class="row"><nav class="site-nav"><a href="/" class="header-logo"><img src="/images/dojo2-logo-white.svg" alt="Dojo"></a><a class="main-nav-link" href="/tutorials">Tutorials</a> <a class="main-nav-link" href="/api">API</a> <a class="main-nav-link" href="/blog/2017/03/27/Dojo-2-is-coming">Blog</a> <a class="main-nav-link main-nav-icon-link" href="https://github.com/dojo/meta"><img src="/images/logos/github-white.svg" alt="Dojo on Github" class="nav-icon github"></a></nav></div></div></header><div class="page-content"><section class="content-container" id="main"><div class="split-content"><div class="tutorial-content"><h1 id="Responding-to-events"><a href="#Responding-to-events" class="headerlink" title="Responding to events"></a>Responding to events</h1><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>In this tutorial, you will learn how to update an application in response to user-generated events, such as clicking a button.</p><p>We will start with an application that renders widgets containing the portrait and names of several employees for the hypothetical company, “Biz-E Corp”. In this tutorial, you will learn how to add event listeners to these widgets so that they show additional information about each worker including a list of the active tasks for the worker.</p><h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><p>With the Dojo 2 tutorial series, you may work with the examples following two different paths:</p><ul><li>A browser embedded editor</li><li>A local installation</li></ul><p>The browser embedded editor is intended to make it easy to quickly see the examples in action, but does not match a normal development environment, and does not provide all of the benefits of TypeScript.</p><p>If you prefer a local installation, please visit the <a href="../000_local_installation/">Dojo 2 Installation Guide</a> before proceeding further with this tutorial.</p><p>Whether you are working locally or using the embedded editor, you need to be familiar with TypeScript as Dojo 2 uses it extensively. For more information, refer to the <a href="../comingsoon.html">TypeScript and Dojo 2</a> article.</p><h2 id="Demo-files"><a href="#Demo-files" class="headerlink" title="Demo files"></a>Demo files</h2><p>If you are following along locally, you can <a href="../assets/004_user_interactions-initial.zip">download</a> the demo project to get started.</p><h2 id="Creating-an-event-listener"><a href="#Creating-an-event-listener" class="headerlink" title="Creating an event listener"></a>Creating an event listener</h2><p>In the <a href="../003_creating_widgets">previous</a> tutorial in this series, we created an application that contains several widgets that render worker information. In this tutorial, you will add event listeners to these widgets to show additional information about an employee when the widget is clicked.</p><p>The first step is to add the listener itself. In Dojo 2, an event listener is assigned like any other property that is passed to the rendering function, <code>v</code>. Look at the <code>Worker</code> widget that is in <code>src/widgets</code>. Currently, the top level vNode has one property assigned: <code>classes</code>. Update the object containing that property as follows:</p><pre class="language-ts"><code class="language-ts"><span class="token punctuation">{</span>
    classes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>workerFront<span class="token punctuation">)</span><span class="token punctuation">,</span>
    onclick<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flip
<span class="token punctuation">}</span>
</code></pre><p>The <code>onclick</code> property registers a function that will be called when the node that it is attached to is clicked. In this case, the registered function is a method called <code>flip</code>. Add a basic implementation for that method:</p><pre class="language-ts"><code class="language-ts"><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'the flip method has been fired!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>Now, run the app (using <code>dojo build --watch</code>) and navigate to <a href="http://localhost:9999" target="_blank" rel="external">localhost:9999</a>. Once there, open the console window and click on any of the worker widgets to confirm that the <code>flip</code> method is being called as expected.</p><p>For short event handlers you might be tempted to use an anonymous function like this:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    classes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>worker<span class="token punctuation">)</span><span class="token punctuation">,</span>
    onclick<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'the handler has been called'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token operator">...</span>
</code></pre><p>While this appears to work, Maquette doesn’t allow an event handler to be updated. To see what happens, let’s have the <code>onclick</code> handler invalidate the widget, forcing Maquette to re-render it.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    classes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>worker<span class="token punctuation">)</span><span class="token punctuation">,</span>
    onclick<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'the handler has been called'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token operator">...</span>
</code></pre><p>Open up your browser’s development tools and display the console tab then click on a widget. Notice that an error is written to the console. To avoid an error, all event handlers should be defined once, such as via a method. Update the <code>onclick</code> property to its previous value:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    classes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>worker<span class="token punctuation">)</span><span class="token punctuation">,</span>
    onclick<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flip
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token operator">...</span>
</code></pre><h2 id="Adding-a-second-visual-state"><a href="#Adding-a-second-visual-state" class="headerlink" title="Adding a second visual state"></a>Adding a second visual state</h2><p>Now that we have an event handler it is time to extend the <code>render</code> method to be able to show detailed information about a worker in addition to the current overview. For the sake of this tutorial, we will call the current view the front and the detailed view the back.</p><p>We could add the additional rendering logic in the current <code>render</code> method, but that method could become difficult to maintain as it would have to contain all of the rendering code for both the front and back of the card. Instead, we will generate the two views using two private methods and then call them from the <code>render</code> method. To start, create a new private method called <code>_renderFront</code> and move the existing render code inside it::</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">private</span> <span class="token function">_renderFront</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> DNode <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
        firstName <span class="token operator">=</span> <span class="token string">'firstName'</span><span class="token punctuation">,</span>
        lastName <span class="token operator">=</span> <span class="token string">'lastName'</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        classes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>workerFront<span class="token punctuation">)</span><span class="token punctuation">,</span>
        onclick<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flip
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            classes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>image<span class="token punctuation">)</span><span class="token punctuation">,</span>
                src<span class="token punctuation">:</span> <span class="token string">'images/worker.jpg'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
                <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'strong'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>Next, create another private method called <code>_renderBack</code> to render the back view:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">private</span> <span class="token function">_renderBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> DNode <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
        firstName <span class="token operator">=</span> <span class="token string">'firstName'</span><span class="token punctuation">,</span>
        lastName <span class="token operator">=</span> <span class="token string">'lastName'</span><span class="token punctuation">,</span>
        email <span class="token operator">=</span> <span class="token string">'unavailable'</span><span class="token punctuation">,</span>
        timePerTask <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
        tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        classes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>workerBack<span class="token punctuation">)</span><span class="token punctuation">,</span>
        onclick<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flip
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                    classes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>imageSmall<span class="token punctuation">)</span><span class="token punctuation">,</span>
                    src<span class="token punctuation">:</span> <span class="token string">'images/worker.jpg'</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                classes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>generalInfo<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
                <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                    classes <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>label<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                    classes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>label<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Email'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>email<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                    classes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>label<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Avg. Time per Task'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>timePerTask<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
                <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'strong'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Current Tasks'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> tasks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>task <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                            classes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>task<span class="token punctuation">)</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token punctuation">[</span>task<span class="token punctuation">]</span>
                    <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>None of this code is new. We are composing together multiple virtual nodes to generate the elements required to render the detailed view. This method does, however, refer to some properties and CSS selectors that do not exist yet.</p><p>Three new properties need to be added to the <code>WorkerProperties</code> interface. These properties are the email address of the worker, the average number of hours they take to complete a task, and the active tasks for the worker.. Update the <code>WorkerProperties</code> interface to:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">WorkerProperties</span> <span class="token keyword">extends</span> <span class="token class-name">WidgetProperties</span> <span class="token punctuation">{</span>
    firstName<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">string</span>
    lastName<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">string</span>
    email<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">string</span>
    timePerTask<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">number</span>
    tasks<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><p>Now, we need to add the CSS selectors that will provide the rules for rendering this view’s elements. Open up the <code>worker.css</code> file in <code>src/styles</code> and update it as follows:</p><pre class="language-css"><code class="language-css"><span class="token selector"><span class="token class">.workerFront</span> </span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">27%</span><span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">3%</span><span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
    <span class="token property">vertical-align</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.workerBack</span> </span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">27%</span><span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">3%</span><span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
    <span class="token property">vertical-align</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">0.5</span>em<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.image</span> </span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.imageSmall</span> </span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">40%</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.generalInfo</span> </span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">55%</span><span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.task</span> </span><span class="token punctuation">{</span>
    <span class="token property">border</span><span class="token punctuation">:</span> solid <span class="token number">1</span>px <span class="token hexcode">#333</span><span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">0.3</span>em<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.label</span> </span><span class="token punctuation">{</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>We also need to update the CSS selector for the front view, by changing the selector from <code>styles.worker</code> to <code>styles.workerFront</code>.</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">private</span> <span class="token function">_renderFront</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> DNode <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
        firstName<span class="token operator">=</span><span class="token string">"firstName"</span><span class="token punctuation">,</span>
        lastName<span class="token operator">=</span><span class="token string">"lastName"</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        classes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>workerFront<span class="token punctuation">)</span><span class="token punctuation">,</span>
        onclick<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flip
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token operator">...</span>
</code></pre><p>Finally, we need to update the <code>render method</code> to choose between the two rendering methods. To do that, add a private field to the class:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">private</span> _isFlipped <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
</code></pre><p>The use of a field to store this kind of data is standard practice in Dojo 2. Properties are used to allow other components to view and modify a widget’s published state. For internal state, however, private fields are used to allow widget to encapsulate state information that should not be exposed publicly. Let’s use that field’s value to determine which side to show:</p><pre class="language-ts"><code class="language-ts"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> DNode <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_isFlipped <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_renderBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_renderFront</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>Confirm that everything is working by viewing the application in a browser - all three cards should be showing their front faces. Now change the value of the <code>_isFlipped</code> field to <code>true</code> and, after the application recompiles, all three widgets should be showing their back faces.</p><p>In order to re-render our widget, we need to update the <code>flip</code> method to toggle the <code>_isFlipped</code> field and invalidate the widget</p><pre class="language-ts"><code class="language-ts"><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_isFlipped <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>_isFlipped<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>Now, the widget can be flipped between its front and back sides by clicking on it.</p><h2 id="Final-steps-providing-more-properties"><a href="#Final-steps-providing-more-properties" class="headerlink" title="Final steps - providing more properties"></a>Final steps - providing more properties</h2><p>Currently, several of the properties are missing for the widgets. As an exercise, try to update the first widget to contain the following properties:</p><pre class="language-ts"><code class="language-ts">firstName<span class="token punctuation">:</span> <span class="token string">'Tim'</span>
lastName<span class="token punctuation">:</span> <span class="token string">'Jones'</span>
email<span class="token punctuation">:</span> <span class="token string">'tim.jones@bizecorp.org'</span><span class="token punctuation">,</span>
tasks<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string">'6267 - Untangle paperclips'</span><span class="token punctuation">,</span>
    <span class="token string">'4384 - Shred documents'</span><span class="token punctuation">,</span>
    <span class="token string">'9663 - Digitize 1985 archive'</span>
<span class="token punctuation">]</span>
</code></pre><p>When you are ready, click the button below to see our solution.</p><div class="solution-container"><button class="toggle-solution" data-target="showSolution1">Toggle Solution</button><section id="showSolution1" class="hidden"><pre class="language-javascript"><code>The widget's parent is responsible <span class="token keyword">for</span> passing properties to the widget<span class="token punctuation">.</span> In <span class="token keyword">this</span> application<span class="token punctuation">,</span> <span class="token template-string"><span class="token string">`Worker`</span></span> widgets are contained by the <span class="token template-string"><span class="token string">`WorkerContainer`</span></span> widget<span class="token punctuation">.</span> To pass the specified properties to the first worker<span class="token punctuation">,</span> the first element <span class="token keyword">in</span> the <span class="token template-string"><span class="token string">`workers`</span></span> array needs to be updated to the following<span class="token punctuation">:</span>


<span class="token function">w</span><span class="token punctuation">(</span>Worker<span class="token punctuation">,</span> <span class="token punctuation">{</span>
	firstName<span class="token punctuation">:</span> <span class="token string">'Tim'</span><span class="token punctuation">,</span>
	lastName<span class="token punctuation">:</span> <span class="token string">'Jones'</span><span class="token punctuation">,</span>
	email<span class="token punctuation">:</span> <span class="token string">'tim.jones@bizecorp.org'</span><span class="token punctuation">,</span>
	tasks<span class="token punctuation">:</span> <span class="token punctuation">[</span>
		<span class="token string">'6267 - Untangle paperclips'</span><span class="token punctuation">,</span>
		<span class="token string">'4384 - Shred documents'</span><span class="token punctuation">,</span>
		<span class="token string">'9663 - Digitize 1985 archive'</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></section></div><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>In this tutorial, we learned how to attach event listeners to respond to widget-generated events. Event handlers are assigned to virtual nodes like any other Dojo 2 property. Be aware that the value of an event handler cannot change once the widget has been rendered the first time. This is normally accomplished by creating a method on the widget class and assigning this method as the event handler.</p><p>If you would like, you can download the <a href="../assets/004_user_interactions-finished.zip">demo application</a>.</p><p>In the <a href="../comingsoon.html">next</a> tutorial, you will learn how to work with more complicated interactions in Dojo 2 by extending the demo application, allowing new Workers to be created using forms.</p></div><div class="editor"><iframe src="https://embed.plnkr.co/g5qEcD/?show=src/widgets/Worker.ts,preview&preview=index.html" class="editor-frame"></iframe></div></div></section></div><div><footer class="page-footer"><div class="content-container"><div class="footer-logo"><img src="/images/logos/dojo-logo-black.svg"></div><div class="info">&copy; JS Foundation, All Rights Reserved.</div></div></footer><script src="/js/combined.js"></script></div></body></html>